{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["App","props","state","selectedFloor","callbacks","onFloorChange","handleFloorChange","bind","onWallClick","handleToggleWall","onHatchClick","handleToggleHatch","onToolChange","handleToolChange","handlers","handleToggleMira","handleToggleReinforce","userData","activeHatches","Set","activeWalls","miras","console","log","this","setState","floor","key","newSet","has","delete","add","newData","Object","assign","newMiras","className","mapData","bank","React","Component","NavBar","ToolPicker","activeTool","nReinforces","size","nMiras","keys","length","id","onClick","activateReinforce","activateMira","FloorPicker","buttons","map","floorName","active","FloorButton","Map","bombs","item","i","site","text","topLeft","a","x","y","b","walls","mira","w","h","onChange","hatches","viewBox","patternUnits","width","height","xlinkHref","d","style","stroke","strokeWidth","fill","href","preserveAspectRatio","Wall","tl","sz","triangleCoords","points","join","Hatch","underTL","mask","Bomb","rx","ry","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.40e23739.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\nimport bank from './bank.json';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedFloor: 0,\n      callbacks: {\n        onFloorChange: this.handleFloorChange.bind(this),\n        onWallClick: this.handleToggleWall.bind(this),\n        onHatchClick: this.handleToggleHatch.bind(this),\n        onToolChange: this.handleToolChange.bind(this)\n      },\n      handlers: {\n        handleToggleMira: this.handleToggleMira.bind(this),\n        handleToggleReinforce: this.handleToggleWall.bind(this)\n      },\n      userData: {\n        activeHatches: new Set([]),\n        activeWalls: new Set([]),\n        miras: {}\n      }\n    };\n  }\n  handleToolChange(callbacks) {\n    console.log(this);\n    this.setState({callbacks: callbacks});\n  }\n  handleFloorChange(floor) {\n    this.setState({selectedFloor: floor});\n  }\n  handleToggleHatch(key) {\n    const newSet = new Set(this.state.userData.activeHatches);\n    if (newSet.has(key)) {\n       newSet.delete(key);\n    } else {\n      newSet.add(key);\n    }\n    const newData = Object.assign({}, this.state.userData);\n    newData.activeHatches = newSet;\n    this.setState({userData: newData});\n  }\n  handleToggleMira(key) {\n    console.log(\"mira\");\n    const newMiras = Object.assign({}, this.state.userData.miras);\n    if (key in newMiras) {\n      const orientation = newMiras[key];\n      if (orientation === 1) {\n        newMiras[key] = 2;\n      } else {\n        delete newMiras[key];\n      }\n    } else {\n      newMiras[key] = 1;\n    }\n    const newData = Object.assign({}, this.state.userData);\n    newData.miras = newMiras;\n    this.setState({userData: newData});\n  }\n  handleToggleWall(key) {\n    const newSet = new Set(this.state.userData.activeWalls);\n    if (newSet.has(key)) {\n       newSet.delete(key);\n    } else {\n      newSet.add(key);\n    }\n    const newData = Object.assign({}, this.state.userData);\n    newData.activeWalls = newSet;\n    this.setState({userData: newData});\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <NavBar handlers={this.state.handlers} userData={this.state.userData} selectedFloor={this.state.selectedFloor} callbacks={this.state.callbacks}/>\n        <Map mapData={bank} userData={this.state.userData} floor={this.state.selectedFloor} callbacks={this.state.callbacks}/>\n      </div>\n    );\n  }\n}\nclass NavBar extends React.Component {\n  render() {\n    return (\n    <nav>\n      <FloorPicker selectedFloor={this.props.selectedFloor} onFloorChange={this.props.callbacks.onFloorChange} />\n      <ToolPicker handlers={this.props.handlers} callbacks={this.props.callbacks} userData={this.props.userData}/>\n    </nav>\n    )\n  }\n}\n\nclass ToolPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTool: \"reinforce\"\n    };\n  }\n\n  activateReinforce() {\n    this.setState({activeTool: \"reinforce\"});\n    const callbacks = this.props.callbacks;\n    callbacks.onWallClick = this.props.handlers.handleToggleReinforce;\n    this.props.callbacks.onToolChange(callbacks);\n  }\n  activateMira() {\n    this.setState({activeTool: \"mira\"});\n    const callbacks = this.props.callbacks;\n    callbacks.onWallClick = this.props.handlers.handleToggleMira;\n    this.props.callbacks.onToolChange(callbacks);\n  }\n  render() {\n    const nReinforces = this.props.userData.activeWalls.size+this.props.userData.activeHatches.size;\n    const nMiras = Object.keys(this.props.userData.miras).length;\n    return (\n      <div id=\"tool-selector\">\n        <button\n          className={this.state.activeTool === \"reinforce\" ? \"active\" : \"\"}\n          onClick={() => {; this.activateReinforce()}}\n          id=\"reinforce-tool\">\n          {nReinforces}\n        </button>\n        <button\n          className={this.state.activeTool === \"mira\" ? \"active\" : \"\"} \n          onClick={() => {\n            this.activateMira()}}\n          id=\"mira-tool\">\n          {nMiras}\n        </button>\n      </div>\n    )\n  }\n}\n\n// class ToolButton extends React.Component {\n//   render() {\n//     return (\n//       <button class={this.props.toolClass}>\n//       </button>\n//       )\n//   }\n// }\n\nclass FloorPicker extends React.Component {\n  render() {\n    const buttons = [\"B\",\"1\",\"2\",\"3\"].map((floorName, floor) => \n      (\n        <FloorButton\n          key={floor}\n          active={this.props.selectedFloor===floor}\n          floor={floor}\n          floorName={floorName}\n          onClick={this.props.onFloorChange}\n        />\n      )\n    );\n    return (\n      <div id=\"floor-selector\">\n        {buttons}\n      </div>\n    )\n  }\n}\n\nclass FloorButton extends React.Component {\n  render() {\n    return (\n    <button\n      className={this.props.active ? \"active\" : \"\"}\n      onClick={() => this.props.onClick(this.props.floor)}>\n        {this.props.floorName}\n    </button>\n    )\n  }\n}\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mapData: props.mapData\n    };\n  }\n  render() {\n    console.log(this.props.userData.miras);\n    const bombs = this.props.mapData.bombs.map((item, i) =>\n      <g key={item.site} className={\"bomb\"+(i+1)}>\n        <Bomb text=\"a\" topLeft={item.a} size={{x:30, y:40}} />\n        <Bomb text=\"b\" topLeft={item.b} size={{x:30, y:40}} />\n      </g>\n    );\n    const walls = this.props.mapData.walls.map((item, i) =>\n      <Wall key={i} id={i} mira={i in this.props.userData.miras ? this.props.userData.miras[i] : false} topLeft={{x: item.x, y: item.y}} size={{x: item.w, y:item.h}} onChange={this.props.callbacks.onWallClick}\n      active={this.props.userData.activeWalls.has(i)}/>\n    );\n    const hatches = this.props.mapData.hatches.map((item, i) =>\n      <Hatch key={i} id={i} topLeft={{x: item.x, y: item.y}} size={{x: item.w, y:item.h}} onChange={this.props.callbacks.onHatchClick}\n      active={this.props.userData.activeHatches.has(i)}/>\n    );\n    const viewBoxes = [\"-1000 -1000 1000 1000\", \"0 -1000 1000 1000\", \"-1000 0 1000 1000\", \"0 0 1000 1000\"];\n    return (\n      <div id=\"map\">\n      <svg id=\"svg\" viewBox={viewBoxes[this.props.floor]}>\n        <pattern id=\"diagonal-stripe-4\" patternUnits=\"userSpaceOnUse\" width=\"10\" height=\"10\"> <image xlinkHref=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSdibGFjaycvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J3doaXRlJyBzdHJva2Utd2lkdGg9JzMnLz4KPC9zdmc+\" x=\"0\" y=\"0\" width=\"10\" height=\"10\"> </image> </pattern>\n        <pattern id=\"diagonalHatch\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\">\n          <path d=\"M-1,1 l2,-2\n                  M0,4 l4,-4\n                  M3,5 l2,-2\" \n                style={{stroke: \"black\", strokeWidth:2}} />\n        </pattern>\n        <mask id=\"striped-mask\" x=\"0\" y=\"0\" width=\"1\" height=\"1\" >\n          <rect x=\"-1000\" y=\"-1000\" width=\"2000\" height=\"2000\" fill=\"url(#diagonal-stripe-4)\" />\n        </mask>\n        <image href=\"res/bank.png\" preserveAspectRatio=\"none\" x=\"-1000\" y=\"-1000\" width=\"2000\" height=\"2000\" />\n        {bombs}\n        {walls}\n        {hatches}\n      </svg>\n      </div>\n    )\n  }\n}\n\nclass Wall extends React.Component {\n  render() {\n    var tl = this.props.topLeft;\n    var sz = this.props.size;\n    var triangleCoords = false;\n    if (this.props.mira) {\n      console.log(\"mira found\");\n      if (sz.x < sz.y) {\n        if (this.props.mira === 1) {\n          triangleCoords = [\n            {\n              x: tl.x+sz.x,\n              y: tl.y\n            },\n            {\n              x: tl.x+sz.x,\n              y: tl.y+sz.y\n            },\n            {\n              x: tl.x+sz.x+10,\n              y: tl.y+(sz.y/2)\n            },\n          ]\n        } else {\n          triangleCoords = [\n            {\n              x: tl.x,\n              y: tl.y\n            },\n            {\n              x: tl.x,\n              y: tl.y+sz.y\n            },\n            {\n              x: tl.x-10,\n              y: tl.y+(sz.y/2)\n            },\n          ]\n        }\n      } else {\n        if (this.props.mira === 1) {\n          triangleCoords = [\n            {\n              x: tl.x,\n              y: tl.y+sz.y\n            },\n            {\n              x: tl.x+sz.x,\n              y: tl.y+sz.y\n            },\n            {\n              x: tl.x+sz.x/2,\n              y: tl.y+sz.y+10\n            },\n          ]\n        } else {\n          triangleCoords = [\n            {\n              x: tl.x,\n              y: tl.y\n            },\n            {\n              x: tl.x+sz.x,\n              y: tl.y\n            },\n            {\n              x: tl.x+sz.x/2,\n              y: tl.y-10\n            },\n          ]\n        }\n      }\n    }\n    var mira;\n    if (triangleCoords) {\n      mira = (\n        <polygon className=\"mira\" points={triangleCoords.map(item => item.x+\",\"+item.y).join(\" \")} />\n      )\n    }\n    return (\n      <g onClick={() => this.props.onChange(this.props.id)}>\n        <rect\n          className={\"wall\" + (this.props.active ? \" active\" : \"\")}\n          x={this.props.topLeft.x}\n          y={this.props.topLeft.y}\n          width={this.props.size.x}\n          height={this.props.size.y}\n        ></rect>\n        {mira ? mira : \"\"}\n      </g>\n    )\n  }\n}\n\nfunction below(topLeft) {\n  if (topLeft.x < 0 && topLeft.y < 0) {\n    return topLeft;\n  }\n  if (topLeft.x >= 0 && topLeft.y < 0) {\n    return Object.assign({}, topLeft, {x: topLeft.x-1000});\n  }\n  if (topLeft.x < 0 && topLeft.y >= 0) {\n    return {x: topLeft.x+1000, y: topLeft.y-1000};\n  }\n  if (topLeft.x >= 0 && topLeft.y >= 0) {\n    return Object.assign({}, topLeft, {y: topLeft.y-1000});\n  }\n}\n\nclass Hatch extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: false,\n    };\n  }\n  toggleActive() {\n    this.setState({active: (!this.state.active)});\n  }\n  render() {\n    const underTL = below(this.props.topLeft);\n    return (\n      <g onClick={() => this.props.onChange(this.props.id)}>\n      <rect\n        className={\"overhatch\" + (this.props.active ? \" active\" : \"\")}\n        x={this.props.topLeft.x}\n        y={this.props.topLeft.y}\n        width={this.props.size.x}\n        height={this.props.size.y}\n      ></rect>\n      <rect\n        className={\"underhatch\" + (this.props.active ? \" active\" : \"\")}\n        x={underTL.x}\n        y={underTL.y}\n        width={this.props.size.x}\n        height={this.props.size.y}\n        mask=\"url(#striped-mask)\">\n      </rect></g>\n    )\n  }\n}\n\nclass Bomb extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      topLeft: props.topLeft,\n      size: props.size,\n      text: props.text\n    };\n  }\n  render() {\n    return (\n      <g>\n        <rect\n          x={this.state.topLeft.x}\n          y={this.state.topLeft.y}\n          width={this.state.size.x}\n          height={this.state.size.y}\n          rx=\"5\"\n          ry=\"5\"\n          ></rect>\n        <text\n          x={this.state.topLeft.x+10}\n          y={this.state.topLeft.y+25}\n          className=\"bombText\"\n          >{this.state.text}\n          </text>\n      </g>\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}