{"version":3,"sources":["components/Map.js","actions/index.js","components/NavBar.js","components/App.js","reducers/data.js","reducers/ui.js","reducers/user.js","reducers/index.js","index.js"],"names":["Map","bombs","this","props","mapData","map","item","i","key","site","className","text","topLeft","a","size","x","y","b","walls","id","mira","userState","miras","w","h","onChange","actions","clickWall","active","reinforcedWalls","hatches","clickHatch","reinforcedHatches","viewBox","floor","patternUnits","width","height","xlinkHref","fill","href","image","preserveAspectRatio","React","Component","Wall","tl","sz","triangleCoords","console","log","points","join","onClick","Hatch","state","setState","underTL","Object","assign","mask","Bomb","rx","ry","CLICK_WALL","CLICK_HATCH","SELECT_TOOL","SELECT_FLOOR","SELECT_MAP","Tools","REINFORCE","MIRA","type","selectTool","selectFloor","selectMap","NavBar","mapsData","selectedFloor","ui","selectedTool","tool","ToolPicker","nReinforces","keys","length","nMiras","FloorPicker","buttons","floors","floorName","MapPicker","e","target","value","FloorButton","App","data","maps","user","connect","dispatch","bindActionCreators","combineReducers","action","res","store","createStore","ReactDOM","render","document","getElementById"],"mappings":"k9SAEaA,G,MAAb,iLACc,IAAD,OACDC,EAAQC,KAAKC,MAAMC,QAAQH,MAAMI,KAAI,SAACC,EAAMC,GAAP,OACzC,uBAAGC,IAAKF,EAAKG,KAAMC,UAAW,QAAQH,EAAE,IACtC,kBAAC,EAAD,CAAMI,KAAK,IAAIC,QAASN,EAAKO,EAAGC,KAAM,CAACC,EAAE,GAAIC,EAAE,MAC/C,kBAAC,EAAD,CAAML,KAAK,IAAIC,QAASN,EAAKW,EAAGH,KAAM,CAACC,EAAE,GAAIC,EAAE,UAG7CE,EAAQhB,KAAKC,MAAMC,QAAQc,MAAMb,KAAI,SAACC,EAAMC,GAAP,OACzC,kBAAC,EAAD,CAAMC,IAAKD,EAAGY,GAAIZ,EAAGa,KAAMb,KAAK,EAAKJ,MAAMkB,UAAUC,OAAQ,EAAKnB,MAAMkB,UAAUC,MAAMf,GAAYK,QAAS,CAACG,EAAGT,EAAKS,EAAGC,EAAGV,EAAKU,GAAIF,KAAM,CAACC,EAAGT,EAAKiB,EAAGP,EAAEV,EAAKkB,GAAIC,SAAU,EAAKtB,MAAMuB,QAAQC,UAC/LC,OAAQrB,KAAK,EAAKJ,MAAMkB,UAAUQ,qBAE9BC,EAAU5B,KAAKC,MAAMC,QAAQ0B,QAAQzB,KAAI,SAACC,EAAMC,GAAP,OAC7C,kBAAC,EAAD,CAAOC,IAAKD,EAAGY,GAAIZ,EAAGK,QAAS,CAACG,EAAGT,EAAKS,EAAGC,EAAGV,EAAKU,GAAIF,KAAM,CAACC,EAAGT,EAAKiB,EAAGP,EAAEV,EAAKkB,GAAIC,SAAU,EAAKtB,MAAMuB,QAAQK,WACjHH,OAAQrB,KAAK,EAAKJ,MAAMkB,UAAUW,uBAGpC,OACE,yBAAKb,GAAG,OACR,yBAAKA,GAAG,MAAMc,QAHE,CAAC,wBAAyB,oBAAqB,oBAAqB,iBAGnD/B,KAAKC,MAAM+B,QAC1C,6BAASf,GAAG,oBAAoBgB,aAAa,iBAAiBC,MAAM,KAAKC,OAAO,MAAhF,IAAsF,2BAAOC,UAAU,qUAAqUvB,EAAE,IAAIC,EAAE,IAAIoB,MAAM,KAAKC,OAAO,MAApX,KAAtF,KACA,0BAAMlB,GAAG,eAAeJ,EAAE,IAAIC,EAAE,IAAIoB,MAAM,IAAIC,OAAO,KACnD,0BAAMtB,EAAE,QAAQC,EAAE,QAAQoB,MAAM,OAAOC,OAAO,OAAOE,KAAK,6BAE5D,2BAAOC,KAAMtC,KAAKC,MAAMC,QAAQqC,MAAOC,oBAAoB,OAAO3B,EAAE,QAAQC,EAAE,QAAQoB,MAAM,OAAOC,OAAO,SACzGpC,EACAiB,EACAY,QA3BX,GAAyBa,IAAMC,YAkCvBC,E,iLACM,IAwEJzB,EAxEG,OACH0B,EAAK5C,KAAKC,MAAMS,QAChBmC,EAAK7C,KAAKC,MAAMW,KAChBkC,GAAiB,EA2ErB,OA1EI9C,KAAKC,MAAMiB,OACb6B,QAAQC,IAAI,cAGRF,EAFAD,EAAGhC,EAAIgC,EAAG/B,EACY,IAApBd,KAAKC,MAAMiB,KACI,CACf,CACEL,EAAG+B,EAAG/B,EAAEgC,EAAGhC,EACXC,EAAG8B,EAAG9B,GAER,CACED,EAAG+B,EAAG/B,EAAEgC,EAAGhC,EACXC,EAAG8B,EAAG9B,EAAE+B,EAAG/B,GAEb,CACED,EAAG+B,EAAG/B,EAAEgC,EAAGhC,EAAE,GACbC,EAAG8B,EAAG9B,EAAG+B,EAAG/B,EAAE,IAID,CACf,CACED,EAAG+B,EAAG/B,EACNC,EAAG8B,EAAG9B,GAER,CACED,EAAG+B,EAAG/B,EACNC,EAAG8B,EAAG9B,EAAE+B,EAAG/B,GAEb,CACED,EAAG+B,EAAG/B,EAAE,GACRC,EAAG8B,EAAG9B,EAAG+B,EAAG/B,EAAE,IAKI,IAApBd,KAAKC,MAAMiB,KACI,CACf,CACEL,EAAG+B,EAAG/B,EACNC,EAAG8B,EAAG9B,EAAE+B,EAAG/B,GAEb,CACED,EAAG+B,EAAG/B,EAAEgC,EAAGhC,EACXC,EAAG8B,EAAG9B,EAAE+B,EAAG/B,GAEb,CACED,EAAG+B,EAAG/B,EAAEgC,EAAGhC,EAAE,EACbC,EAAG8B,EAAG9B,EAAE+B,EAAG/B,EAAE,KAIA,CACf,CACED,EAAG+B,EAAG/B,EACNC,EAAG8B,EAAG9B,GAER,CACED,EAAG+B,EAAG/B,EAAEgC,EAAGhC,EACXC,EAAG8B,EAAG9B,GAER,CACED,EAAG+B,EAAG/B,EAAEgC,EAAGhC,EAAE,EACbC,EAAG8B,EAAG9B,EAAE,MAOdgC,IACF5B,EACE,6BAASV,UAAU,OAAOyC,OAAQH,EAAe3C,KAAI,SAAAC,GAAI,OAAIA,EAAKS,EAAE,IAAIT,EAAKU,KAAGoC,KAAK,QAIvF,uBAAGC,QAAS,kBAAM,EAAKlD,MAAMsB,SAAS,EAAKtB,MAAMgB,MAC/C,0BACET,UAAW,QAAUR,KAAKC,MAAMyB,OAAS,UAAY,IACrDb,EAAGb,KAAKC,MAAMS,QAAQG,EACtBC,EAAGd,KAAKC,MAAMS,QAAQI,EACtBoB,MAAOlC,KAAKC,MAAMW,KAAKC,EACvBsB,OAAQnC,KAAKC,MAAMW,KAAKE,IAEzBI,GAAc,Q,GAxFJuB,IAAMC,W,IA6GnBU,E,YACJ,WAAYnD,GAAQ,IAAD,8BACjB,4CAAMA,KACDoD,MAAQ,CACX3B,QAAQ,GAHO,E,4EAOjB1B,KAAKsD,SAAS,CAAC5B,QAAU1B,KAAKqD,MAAM3B,W,+BAE5B,IAzBGhB,EAyBJ,OACD6C,GA1BK7C,EA0BWV,KAAKC,MAAMS,SAzBvBG,EAAI,GAAKH,EAAQI,EAAI,EACxBJ,EAELA,EAAQG,GAAK,GAAKH,EAAQI,EAAI,EACzB0C,OAAOC,OAAO,GAAI/C,EAAS,CAACG,EAAGH,EAAQG,EAAE,MAE9CH,EAAQG,EAAI,GAAKH,EAAQI,GAAK,EACzB,CAACD,EAAGH,EAAQG,EAAE,IAAMC,EAAGJ,EAAQI,EAAE,KAEtCJ,EAAQG,GAAK,GAAKH,EAAQI,GAAK,EAC1B0C,OAAOC,OAAO,GAAI/C,EAAS,CAACI,EAAGJ,EAAQI,EAAE,WADlD,EAiBE,OACE,uBAAGqC,QAAS,kBAAM,EAAKlD,MAAMsB,SAAS,EAAKtB,MAAMgB,MACjD,0BACET,UAAW,aAAeR,KAAKC,MAAMyB,OAAS,UAAY,IAC1Db,EAAGb,KAAKC,MAAMS,QAAQG,EACtBC,EAAGd,KAAKC,MAAMS,QAAQI,EACtBoB,MAAOlC,KAAKC,MAAMW,KAAKC,EACvBsB,OAAQnC,KAAKC,MAAMW,KAAKE,IAE1B,0BACEN,UAAW,cAAgBR,KAAKC,MAAMyB,OAAS,UAAY,IAC3Db,EAAG0C,EAAQ1C,EACXC,EAAGyC,EAAQzC,EACXoB,MAAOlC,KAAKC,MAAMW,KAAKC,EACvBsB,OAAQnC,KAAKC,MAAMW,KAAKE,EACxB4C,KAAK,4B,GA3BOjB,IAAMC,WAiCpBiB,E,YACJ,WAAY1D,GAAQ,IAAD,8BACjB,4CAAMA,KACDoD,MAAQ,CACX3C,QAAST,EAAMS,QACfE,KAAMX,EAAMW,KACZH,KAAMR,EAAMQ,MALG,E,sEASjB,OACE,2BACE,0BACEI,EAAGb,KAAKqD,MAAM3C,QAAQG,EACtBC,EAAGd,KAAKqD,MAAM3C,QAAQI,EACtBoB,MAAOlC,KAAKqD,MAAMzC,KAAKC,EACvBsB,OAAQnC,KAAKqD,MAAMzC,KAAKE,EACxB8C,GAAG,IACHC,GAAG,MAEL,0BACEhD,EAAGb,KAAKqD,MAAM3C,QAAQG,EAAE,GACxBC,EAAGd,KAAKqD,MAAM3C,QAAQI,EAAE,GACxBN,UAAU,YACRR,KAAKqD,MAAM5C,W,GAxBJgC,IAAMC,WClLdoB,EAAa,aACbC,EAAc,cACdC,EAAc,cACdC,EAAe,eAEfC,EAAa,aAEbC,EAAQ,CACjBC,UAAW,YACXC,KAAM,QAaH,SAAS5C,EAAUR,GACtB,MAAQ,CAACqD,KAAMR,EAAY7C,MAExB,SAASY,EAAWZ,GACvB,MAAQ,CAACqD,KAAMP,EAAa9C,MAEzB,SAASsD,EAAWtD,GACvB,MAAO,CAACqD,KAAMN,EAAa/C,MAExB,SAASuD,EAAYvD,GACxB,MAAO,CAACqD,KAAML,EAAchD,MAEzB,SAASwD,EAAUxD,GACtB,MAAO,CAACqD,KAAMJ,EAAYjD,M,IChCxByD,E,iLAEA,OACA,6BACE,kBAAC,EAAD,CAAaxE,QAASF,KAAKC,MAAM0E,SAAS3E,KAAKC,MAAMkB,UAAUhB,KAAMyE,cAAe5E,KAAKC,MAAM4E,GAAG7C,MAAOwC,YAAaxE,KAAKC,MAAMuB,QAAQgD,cACzI,kBAAC,EAAD,CAAWjD,SAAUvB,KAAKC,MAAMuB,QAAQiD,YACxC,kBAAC,EAAD,CAAYK,aAAc9E,KAAKC,MAAM4E,GAAGE,KAAMR,WAAYvE,KAAKC,MAAMuB,QAAQ+C,WAAYpD,UAAWnB,KAAKC,MAAMkB,iB,GANlGsB,IAAMC,WAYnBsC,E,iLACM,IAAD,OACDC,EAAczB,OAAO0B,KAAKlF,KAAKC,MAAMkB,UAAUQ,iBAAiBwD,OAAO3B,OAAO0B,KAAKlF,KAAKC,MAAMkB,UAAUW,mBAAmBqD,OAC3HC,EAAS5B,OAAO0B,KAAKlF,KAAKC,MAAMkB,UAAUC,OAAO+D,OACvD,OACE,yBAAKlE,GAAG,iBACN,4BACET,UAAWR,KAAKC,MAAM6E,eAAiBX,EAAMC,UAAY,SAAW,GACpEjB,QAAS,kBAAM,EAAKlD,MAAMsE,WAAWJ,EAAMC,YAC3CnD,GAAG,kBACFgE,GAEH,4BACEzE,UAAWR,KAAKC,MAAM6E,eAAiBX,EAAME,KAAO,SAAW,GAC/DlB,QAAS,kBAAM,EAAKlD,MAAMsE,WAAWJ,EAAME,OAC3CpD,GAAG,aACFmE,Q,GAhBc3C,IAAMC,WAuBzB2C,E,iLACM,IAAD,OACDC,EAAUtF,KAAKC,MAAMC,QAAQqF,OAAOpF,KAAI,SAACqF,EAAWxD,GAAZ,OAE1C,kBAAC,EAAD,CACE1B,IAAK0B,EACLN,OAAQ,EAAKzB,MAAM2E,gBAAgB5C,EACnCA,MAAOA,EACPwD,UAAWA,EACXrC,QAAS,EAAKlD,MAAMuE,iBAI1B,OACE,yBAAKvD,GAAG,kBACLqE,O,GAfiB7C,IAAMC,WAqB1B+C,E,iLACM,IAAD,OACP,OACE,4BAAQxE,GAAG,cAAcM,SAAU,SAACmE,GAAD,OAAO,EAAKzF,MAAMsB,SAASmE,EAAEC,OAAOC,SACrE,4BAAQA,MAAM,QAAd,QACA,4BAAQA,MAAM,UAAd,e,GALgBnD,IAAMC,WAWxBmD,E,iLACM,IAAD,OACP,OACA,4BACErF,UAAWR,KAAKC,MAAMyB,OAAS,SAAW,GAC1CyB,QAAS,kBAAM,EAAKlD,MAAMkD,QAAQ,EAAKlD,MAAM+B,SAC1ChC,KAAKC,MAAMuF,e,GANM/C,IAAMC,WAYnBgC,IC1EToB,E,YACJ,WAAY7F,GAAQ,qEACZA,I,sEAGN,OACE,yBAAKO,UAAU,OACb,kBAAC,EAAD,CAAQmE,SAAU3E,KAAKC,MAAM8F,KAAKC,KAAMnB,GAAI7E,KAAKC,MAAM4E,GAAIrD,QAASxB,KAAKC,MAAMuB,QAASL,UAAWnB,KAAKC,MAAMgG,OAC9G,kBAAC,EAAD,CAAK/F,QAASF,KAAKC,MAAM8F,KAAKC,KAAKhG,KAAKC,MAAMgG,KAAK9F,KAAMgB,UAAWnB,KAAKC,MAAMgG,KAAMzE,QAASxB,KAAKC,MAAMuB,QAASQ,MAAOhC,KAAKC,MAAM4E,GAAG7C,a,GAR7HS,IAAMC,WAuBTwD,mBATf,SAAyB7C,GACvB,OAAOA,KAGT,SAA4B8C,GAC1B,MAAO,CAAC3E,QAAS4E,YAAmB,CAAC3E,YAAWI,aAAY0C,aAAYC,cAAaC,aAAY0B,MAIpFD,CAA6CJ,GC5BtDE,EAAO,CACT,K,MACA,O,OAEW,aAAwC,IAA/B3C,EAA8B,uDAAtB,CAAC2C,KAAMA,GAAe,iCAClD,OAAO3C,GCLIgD,cAAgB,CAC3BtB,KAaJ,WAAgD,IAAlC1B,EAAiC,uDAAzBc,EAAMC,UAAWkC,EAAQ,uCAC3C,OAAQA,EAAOhC,MACX,KAAKN,EACD,OAAOsC,EAAOrF,GAClB,QACI,OAAOoC,IAjBfrB,MAGJ,WAAmC,IAApBqB,EAAmB,uDAAX,EAAGiD,EAAQ,uCAC9B,OAAQA,EAAOhC,MACX,KAAKL,EACD,OAAOqC,EAAOrF,GAClB,QACI,OAAOoC,MCXJ,iBAAuD,IAA7CA,EAA4C,uDAApC,GAAIiD,EAAgC,uCAAxBvB,EAAwB,uDAAjBZ,EAAMC,UACtD,MAAO,CACHjE,IAAKA,EAAIkD,EAAMlD,IAAKmG,GACpBlF,MAAOA,EAAMiC,EAAMjC,MAAOkF,EAAQvB,GAClCpD,gBAAiBA,EAAgB0B,EAAM1B,gBAAiB2E,EAAQvB,GAChEjD,kBAAmBA,EAAkBuB,EAAMvB,kBAAmBwE,EAAQvB,KAG9E,SAAS5E,IAA6B,IAAzBkD,EAAwB,uDAAhB,OAAQiD,EAAQ,uCACjC,OAAIA,EAAOhC,OAASJ,EACTb,EAEJiD,EAAOrF,GAElB,SAASG,IAAiC,IAA3BiC,EAA0B,uDAAlB,GAAIiD,EAAc,uCAANvB,EAAM,uCACrC,GAAIuB,EAAOhC,OAASJ,EAChB,MAAO,GAEX,GAAIa,IAASZ,EAAME,MAAQiC,EAAOhC,OAASR,EACvC,OAAOT,EAEX,IAAMkD,EAAM/C,OAAOC,OAAO,GAAIJ,GAC9B,OAAIiD,EAAOrF,MAAMoC,EACY,IAArBA,EAAMiD,EAAOrF,YACNsF,EAAID,EAAOrF,IACXsF,IAEPA,EAAID,EAAOrF,IAAM,EACVsF,IAGXA,EAAID,EAAOrF,IAAM,EACVsF,GAIf,SAAS5E,IAA2C,IAA3B0B,EAA0B,uDAAlB,GAAIiD,EAAc,uCAANvB,EAAM,uCAC/C,GAAIuB,EAAOhC,OAASJ,EAChB,MAAO,GAEX,GAAIa,IAASZ,EAAMC,WAAakC,EAAOhC,OAASR,EAC5C,OAAOT,EAEX,IAAMkD,EAAM/C,OAAOC,OAAO,GAAIJ,GAM9B,OALIiD,EAAOrF,MAAMoC,SACNkD,EAAID,EAAOrF,IAElBsF,EAAID,EAAOrF,KAAM,EAEdsF,EAGX,SAASzE,IAA6C,IAA3BuB,EAA0B,uDAAlB,GAAIiD,EAAc,uCAANvB,EAAM,uCACjD,GAAIuB,EAAOhC,OAASJ,EAChB,MAAO,GAEX,GAAIa,IAASZ,EAAMC,WAAakC,EAAOhC,OAASP,EAC5C,OAAOV,EAEX,IAAMkD,EAAM/C,OAAOC,OAAO,GAAIJ,GAM9B,OALIiD,EAAOrF,MAAMoC,SACNkD,EAAID,EAAOrF,IAElBsF,EAAID,EAAOrF,KAAM,EAEdsF,EC/DI,ICITC,EAAQC,aDJC,WAA8B,IAArBpD,EAAoB,uDAAZ,GAAIiD,EAAQ,uCAClCC,EAAM,CACRR,KAAMA,EAAK1C,EAAM0C,KAAMO,GACvBzB,GAAIA,EAAGxB,EAAMwB,GAAIyB,GACjBL,KAAMA,EAAK5C,EAAM4C,KAAMK,EAAQjD,EAAMwB,IAAMxB,EAAMwB,GAAKxB,EAAMwB,GAAGE,KAAO,OAE1E,OAAOwB,KCAXG,IAASC,OACP,kBAAC,IAAD,CAAUH,MAAOA,GACf,kBAAC,EAAD,OAEAI,SAASC,eAAe,W","file":"static/js/main.75a19530.chunk.js","sourcesContent":["import React from 'react';\n\nexport class Map extends React.Component {\n    render() {\n      const bombs = this.props.mapData.bombs.map((item, i) =>\n        <g key={item.site} className={\"bomb\"+(i+1)}>\n          <Bomb text=\"a\" topLeft={item.a} size={{x:30, y:40}} />\n          <Bomb text=\"b\" topLeft={item.b} size={{x:30, y:40}} />\n        </g>\n      );\n      const walls = this.props.mapData.walls.map((item, i) =>\n        <Wall key={i} id={i} mira={i in this.props.userState.miras ? this.props.userState.miras[i] : false} topLeft={{x: item.x, y: item.y}} size={{x: item.w, y:item.h}} onChange={this.props.actions.clickWall}\n        active={i in this.props.userState.reinforcedWalls}/>\n      );\n      const hatches = this.props.mapData.hatches.map((item, i) =>\n        <Hatch key={i} id={i} topLeft={{x: item.x, y: item.y}} size={{x: item.w, y:item.h}} onChange={this.props.actions.clickHatch}\n        active={i in this.props.userState.reinforcedHatches}/>\n      );\n      const viewBoxes = [\"-1000 -1000 1000 1000\", \"0 -1000 1000 1000\", \"-1000 0 1000 1000\", \"0 0 1000 1000\"];\n      return (\n        <div id=\"map\">\n        <svg id=\"svg\" viewBox={viewBoxes[this.props.floor]}>\n          <pattern id=\"diagonal-stripe-4\" patternUnits=\"userSpaceOnUse\" width=\"10\" height=\"10\"> <image xlinkHref=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSdibGFjaycvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J3doaXRlJyBzdHJva2Utd2lkdGg9JzMnLz4KPC9zdmc+\" x=\"0\" y=\"0\" width=\"10\" height=\"10\"> </image> </pattern>\n          <mask id=\"striped-mask\" x=\"0\" y=\"0\" width=\"1\" height=\"1\" >\n            <rect x=\"-1000\" y=\"-1000\" width=\"2000\" height=\"2000\" fill=\"url(#diagonal-stripe-4)\" />\n          </mask>\n          <image href={this.props.mapData.image} preserveAspectRatio=\"none\" x=\"-1000\" y=\"-1000\" width=\"2000\" height=\"2000\" />\n          {bombs}\n          {walls}\n          {hatches}\n        </svg>\n        </div>\n      )\n    }\n  }\n  \n  class Wall extends React.Component {\n    render() {\n      var tl = this.props.topLeft;\n      var sz = this.props.size;\n      var triangleCoords = false;\n      if (this.props.mira) {\n        console.log(\"mira found\");\n        if (sz.x < sz.y) {\n          if (this.props.mira === 1) {\n            triangleCoords = [\n              {\n                x: tl.x+sz.x,\n                y: tl.y\n              },\n              {\n                x: tl.x+sz.x,\n                y: tl.y+sz.y\n              },\n              {\n                x: tl.x+sz.x+10,\n                y: tl.y+(sz.y/2)\n              },\n            ]\n          } else {\n            triangleCoords = [\n              {\n                x: tl.x,\n                y: tl.y\n              },\n              {\n                x: tl.x,\n                y: tl.y+sz.y\n              },\n              {\n                x: tl.x-10,\n                y: tl.y+(sz.y/2)\n              },\n            ]\n          }\n        } else {\n          if (this.props.mira === 1) {\n            triangleCoords = [\n              {\n                x: tl.x,\n                y: tl.y+sz.y\n              },\n              {\n                x: tl.x+sz.x,\n                y: tl.y+sz.y\n              },\n              {\n                x: tl.x+sz.x/2,\n                y: tl.y+sz.y+10\n              },\n            ]\n          } else {\n            triangleCoords = [\n              {\n                x: tl.x,\n                y: tl.y\n              },\n              {\n                x: tl.x+sz.x,\n                y: tl.y\n              },\n              {\n                x: tl.x+sz.x/2,\n                y: tl.y-10\n              },\n            ]\n          }\n        }\n      }\n      var mira;\n      if (triangleCoords) {\n        mira = (\n          <polygon className=\"mira\" points={triangleCoords.map(item => item.x+\",\"+item.y).join(\" \")} />\n        )\n      }\n      return (\n        <g onClick={() => this.props.onChange(this.props.id)}>\n          <rect\n            className={\"wall\" + (this.props.active ? \" active\" : \"\")}\n            x={this.props.topLeft.x}\n            y={this.props.topLeft.y}\n            width={this.props.size.x}\n            height={this.props.size.y}\n          ></rect>\n          {mira ? mira : \"\"}\n        </g>\n      )\n    }\n  }\n  \n  function below(topLeft) {\n    if (topLeft.x < 0 && topLeft.y < 0) {\n      return topLeft;\n    }\n    if (topLeft.x >= 0 && topLeft.y < 0) {\n      return Object.assign({}, topLeft, {x: topLeft.x-1000});\n    }\n    if (topLeft.x < 0 && topLeft.y >= 0) {\n      return {x: topLeft.x+1000, y: topLeft.y-1000};\n    }\n    if (topLeft.x >= 0 && topLeft.y >= 0) {\n      return Object.assign({}, topLeft, {y: topLeft.y-1000});\n    }\n  }\n  \n  class Hatch extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        active: false,\n      };\n    }\n    toggleActive() {\n      this.setState({active: (!this.state.active)});\n    }\n    render() {\n      const underTL = below(this.props.topLeft);\n      return (\n        <g onClick={() => this.props.onChange(this.props.id)}>\n        <rect\n          className={\"overhatch\" + (this.props.active ? \" active\" : \"\")}\n          x={this.props.topLeft.x}\n          y={this.props.topLeft.y}\n          width={this.props.size.x}\n          height={this.props.size.y}\n        ></rect>\n        <rect\n          className={\"underhatch\" + (this.props.active ? \" active\" : \"\")}\n          x={underTL.x}\n          y={underTL.y}\n          width={this.props.size.x}\n          height={this.props.size.y}\n          mask=\"url(#striped-mask)\">\n        </rect></g>\n      )\n    }\n  }\n  \n  class Bomb extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        topLeft: props.topLeft,\n        size: props.size,\n        text: props.text\n      };\n    }\n    render() {\n      return (\n        <g>\n          <rect\n            x={this.state.topLeft.x}\n            y={this.state.topLeft.y}\n            width={this.state.size.x}\n            height={this.state.size.y}\n            rx=\"5\"\n            ry=\"5\"\n            ></rect>\n          <text\n            x={this.state.topLeft.x+10}\n            y={this.state.topLeft.y+25}\n            className=\"bombText\"\n            >{this.state.text}\n            </text>\n        </g>\n      )\n    }\n  }","export const CLICK_WALL = \"CLICK_WALL\";\nexport const CLICK_HATCH = \"CLICK_HATCH\";\nexport const SELECT_TOOL = \"SELECT_TOOL\";\nexport const SELECT_FLOOR = \"SELECT_FLOOR\";\n\nexport const SELECT_MAP = \"SELECT_MAP\";\n\nexport const Tools = {\n    REINFORCE: \"REINFORCE\",\n    MIRA: \"MIRA\"\n}\n\nexport const Maps = {\n    BANK: \"BANK\",\n    BORDER: \"BORDER\",\n    COASTLINE: \"COASTLINE\",\n    CONSULATE: \"CONSULATE\",\n    KAFE: \"KAFE\",\n    OREGON: \"OREGON\",\n    SKYSCRAPER: \"SKYSCRAPER\"\n}\n\nexport function clickWall(id) {\n    return  {type: CLICK_WALL, id}\n}\nexport function clickHatch(id) {\n    return  {type: CLICK_HATCH, id}\n}\nexport function selectTool(id) {\n    return {type: SELECT_TOOL, id};\n}\nexport function selectFloor(id) {\n    return {type: SELECT_FLOOR, id};\n}\nexport function selectMap(id) {\n    return {type: SELECT_MAP, id};\n}","import React from 'react';\nimport {Tools} from '../actions'\n\nclass NavBar extends React.Component {\n    render() {\n      return (\n      <nav>\n        <FloorPicker mapData={this.props.mapsData[this.props.userState.map]} selectedFloor={this.props.ui.floor} selectFloor={this.props.actions.selectFloor}/>\n        <MapPicker onChange={this.props.actions.selectMap} />\n        <ToolPicker selectedTool={this.props.ui.tool} selectTool={this.props.actions.selectTool} userState={this.props.userState}/>\n      </nav>\n      )\n    }\n  }\n  \n  class ToolPicker extends React.Component {\n    render() {\n      const nReinforces = Object.keys(this.props.userState.reinforcedWalls).length+Object.keys(this.props.userState.reinforcedHatches).length;\n      const nMiras = Object.keys(this.props.userState.miras).length;\n      return (\n        <div id=\"tool-selector\">\n          <button\n            className={this.props.selectedTool === Tools.REINFORCE ? \"active\" : \"\"}\n            onClick={() => this.props.selectTool(Tools.REINFORCE)}\n            id=\"reinforce-tool\">\n            {nReinforces}\n          </button>\n          <button\n            className={this.props.selectedTool === Tools.MIRA ? \"active\" : \"\"}\n            onClick={() => this.props.selectTool(Tools.MIRA)}\n            id=\"mira-tool\">\n            {nMiras}\n          </button>\n        </div>\n      )\n    }\n  }\n  \n  class FloorPicker extends React.Component {\n    render() {\n      const buttons = this.props.mapData.floors.map((floorName, floor) => \n        (\n          <FloorButton\n            key={floor}\n            active={this.props.selectedFloor===floor}\n            floor={floor}\n            floorName={floorName}\n            onClick={this.props.selectFloor}\n          />\n        )\n      );\n      return (\n        <div id=\"floor-selector\">\n          {buttons}\n        </div>\n      )\n    }\n  }\n\n  class MapPicker extends React.Component {\n    render() {\n      return (\n        <select id=\"site-picker\" onChange={(e) => this.props.onChange(e.target.value)}>\n          <option value=\"BANK\">Bank</option>\n          <option value=\"BORDER\">Border</option>\n        </select>\n      )\n    }\n  }\n  \n  class FloorButton extends React.Component {\n    render() {\n      return (\n      <button\n        className={this.props.active ? \"active\" : \"\"}\n        onClick={() => this.props.onClick(this.props.floor)}>\n          {this.props.floorName}\n      </button>\n      )\n    }\n  }\n\nexport default NavBar;","import React from 'react';\nimport './App.css';\nimport {Map} from './Map';\nimport NavBar from './NavBar';\nimport { connect } from 'react-redux'\nimport { bindActionCreators} from 'redux'\nimport {clickWall, clickHatch, selectTool, selectFloor, selectMap} from '../actions'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <NavBar mapsData={this.props.data.maps} ui={this.props.ui} actions={this.props.actions} userState={this.props.user}/>\n        <Map mapData={this.props.data.maps[this.props.user.map]} userState={this.props.user} actions={this.props.actions} floor={this.props.ui.floor}/>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return state;\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {actions: bindActionCreators({clickWall, clickHatch, selectTool, selectFloor, selectMap}, dispatch)}\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import bank from '../mapdata/bank.json';\nimport border from '../mapdata/border.json';\n\nconst maps = {\n    \"BANK\": bank,\n    \"BORDER\": border\n}\nexport default function(state = {maps: maps}, action) {\n    return state;\n}","import { SELECT_TOOL, SELECT_FLOOR, Tools } from '../actions'\nimport { combineReducers } from 'redux'\n\nexport default combineReducers({\n    tool,\n    floor\n})\n\nfunction floor(state = 0, action) {\n    switch (action.type) {\n        case SELECT_FLOOR:\n            return action.id;\n        default:\n            return state\n    }\n}\n\nfunction tool(state = Tools.REINFORCE, action) {\n    switch (action.type) {\n        case SELECT_TOOL:\n            return action.id;\n        default:\n            return state\n    }\n}","import { Tools, CLICK_WALL, CLICK_HATCH, SELECT_MAP } from '../actions'\n\nexport default function (state = {}, action, tool = Tools.REINFORCE) {\n    return {\n        map: map(state.map, action),\n        miras: miras(state.miras, action, tool),\n        reinforcedWalls: reinforcedWalls(state.reinforcedWalls, action, tool),\n        reinforcedHatches: reinforcedHatches(state.reinforcedHatches, action, tool)\n    }\n}\nfunction map(state = \"BANK\", action) {\n    if (action.type !== SELECT_MAP) {\n        return state;\n    }\n    return action.id;\n}\nfunction miras(state = {}, action, tool) {\n    if (action.type === SELECT_MAP) {\n        return [];\n    }\n    if (tool !== Tools.MIRA || action.type !== CLICK_WALL) {\n        return state;\n    }\n    const res = Object.assign({}, state)\n    if (action.id in state) {\n        if (state[action.id] === 2) {\n            delete res[action.id];\n            return res;\n        } else {\n            res[action.id] = 2;\n            return res;\n        }\n    } else {\n        res[action.id] = 1;\n        return res;\n    }\n}\n\nfunction reinforcedWalls(state = [], action, tool) {\n    if (action.type === SELECT_MAP) {\n        return [];\n    }\n    if (tool !== Tools.REINFORCE || action.type !== CLICK_WALL) {\n        return state;\n    }\n    const res = Object.assign({}, state)\n    if (action.id in state) {\n        delete res[action.id];\n    } else {\n        res[action.id] = true;\n    }\n    return res\n}\n\nfunction reinforcedHatches(state = [], action, tool) {\n    if (action.type === SELECT_MAP) {\n        return [];\n    }\n    if (tool !== Tools.REINFORCE || action.type !== CLICK_HATCH) {\n        return state;\n    }\n    const res = Object.assign({}, state)\n    if (action.id in state) {\n        delete res[action.id];\n    } else {\n        res[action.id] = true;\n    }\n    return res\n}","import data from './data'\nimport ui from './ui'\nimport user from './user'\n\nexport default function(state = [], action) {\n    const res = {\n        data: data(state.data, action),\n        ui: ui(state.ui, action),\n        user: user(state.user, action, state.ui && state.ui ? state.ui.tool : null)\n    }\n    return res;\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport './index.css';\nimport App from './components/App';\nimport rootReducer from './reducers'\n\nconst store = createStore(rootReducer)\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}